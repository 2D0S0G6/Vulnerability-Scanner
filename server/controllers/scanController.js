const { curlRequest } = require('../utils/curlUtils');

// Controller for scan
exports.scan = async (req, res) => {
    // Checking if the site is up
    const url = req.body.url;
    const options = {
        responseCode: true
    };

    curlRequest(url, options)
        .then(responseCode => {
            console.log('Response Code:', responseCode);
            if (responseCode['response'] === '200') {
                res.send({ data: "Site is up!" });
            } else {
                res.status(responseCode).send({ error: "Site is not up!" });
            }
        })
        .catch(error => {
            console.error('Error:', error);
            res.status(500).send({ error: "Internal Server Error" });
        });
};
