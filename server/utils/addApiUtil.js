const { v4: uuidv4 } = require('uuid');
const { createTable, insert } = require('../utils/dbUtils');

async function insertApiKeys() {
    const columns = "id INT AUTO_INCREMENT PRIMARY KEY, api_key VARCHAR(36) NOT NULL";
    const name = "apiKeys";
    
    await createTable(name, columns);

    for (let i = 0; i < 10; i++) {
        const uuid = uuidv4();
        const apiKey = { 'api-key': uuid };

        try {
            await insert(name, apiKey);
            console.log(`API Key ${i + 1}:${apiKey} inserted successfully.`);
        } catch (error) {
            console.error('Error inserting API key:', error);
        }
    }

    console.log('All API Keys inserted successfully.');
}

module.exports = insertApiKeys();
